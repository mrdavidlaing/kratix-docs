<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-workshop/part-ii/shared-dependencies">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Extracting shared dependencies | Kratix</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kratix.io/docs/workshop/shared-dependencies"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="kratix docs, kratix documentation"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Extracting shared dependencies | Kratix"><meta data-rh="true" name="description" content="Extracting shared dependencies across multiple requests"><meta data-rh="true" property="og:description" content="Extracting shared dependencies across multiple requests"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kratix.io/docs/workshop/shared-dependencies"><link data-rh="true" rel="alternate" href="https://kratix.io/docs/workshop/shared-dependencies" hreflang="en"><link data-rh="true" rel="alternate" href="https://kratix.io/docs/workshop/shared-dependencies" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://0T1XCKLOOH-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kratix RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kratix Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-88SJVH10M9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-88SJVH10M9",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Kratix" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.6d5f032a.css">
<link rel="preload" href="/assets/js/runtime~main.ed64e71f.js" as="script">
<link rel="preload" href="/assets/js/main.d1626264.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/kratix_k_logo.png" alt="Kratix Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/kratix_k_logo.png" alt="Kratix Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Kratix</b></a><a class="navbar__item navbar__link" href="/docs/main/intro">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/workshop/intro">Workshop</a><a class="navbar__item navbar__link" href="/marketplace">Marketplace</a><a class="navbar__item navbar__link" href="/docs/main/community">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/syntasso/kratix" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/workshop/intro">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/workshop/setup">Prerequisites</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/workshop/part-i/intro">Part I</a><button aria-label="Toggle the collapsible sidebar category &#x27;Part I&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workshop/installing-kratix">Installing Kratix</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workshop/installing-a-promise">Installing a Promise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workshop/multiple-promises">Using Compound Promises</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/workshop/part-ii/intro">Part II</a><button aria-label="Toggle the collapsible sidebar category &#x27;Part II&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workshop/creating-an-api">Creating your first service API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workshop/service-on-demand">Delivering your service on demand</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/workshop/shared-dependencies">Extracting shared dependencies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workshop/schedule-promise">Schedule Promises</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workshop/update-status">Update the Resource status</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/workshop/whats-next">What&#x27;s next?</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/workshop/part-ii/intro"><span itemprop="name">Part II</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Extracting shared dependencies</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Extracting shared dependencies</h1></header><p>This is Part 2 of <a href="/docs/workshop/intro">a series</a> illustrating how Kratix works. <br>
👈🏾<!-- --> <!-- --> <!-- --> Previous: <a href="/docs/workshop/service-on-demand">Delivering your service on demand</a> <br>
👉🏾<!-- --> <!-- --> <!-- --> Next: <a href="/docs/workshop/schedule-promise">Intentionally schedule Promise resources</a></p><hr><p><strong>In this tutorial, you will</strong></p><ul><li><a href="#understanding-dependencies">Understanding Kratix Promise dependencies</a></li><li><a href="#splitting-dependencies">Splitting out Elastic Cloud Kubernetes (ECK) dependencies</a></li><li><a href="#install-promise">Install the Promise with separate dependencies</a></li><li><a href="#resource-requests">Make multiple requests</a></li><li><a href="#summary">Summary</a></li><li><a href="#cleanup">Clean up environment</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-dependencies">Understanding Kratix Promise dependencies<a href="#understanding-dependencies" class="hash-link" aria-label="Direct link to Understanding Kratix Promise dependencies" title="Direct link to Understanding Kratix Promise dependencies">​</a></h2><p>After the previous tutorial step, the ECK Promise bundled all necessary provisioning
steps into the Resource Workflow. This made it possible to only do a single request because of duplication across the requests.</p><p>In this section we will focus on introducing the dependencies part of Promises to manage many requests from a single Promise.</p><figure class="diagram"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 519.664 317.243" width="519.664" height="317.243" class="small"><defs><style>@font-face{font-family:&quot;Virgil&quot;;src:url(https://excalidraw.com/Virgil.woff2)}@font-face{font-family:&quot;Cascadia&quot;;src:url(https://excalidraw.com/Cascadia.woff2)}</style></defs><g stroke-linecap="round"><path d="M30.895 192.821h282.58v70.16H30.895" stroke-width="0" fill="#e64980"></path><path d="M30.895 192.821h282.58m-282.58 0h282.58m0 0v70.16m0-70.16v70.16m0 0H30.895m282.58 0H30.895m0 0v-70.16m0 70.16v-70.16" stroke="#a61e4d" fill="none"></path></g><text font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(112.024 215.874)">Dependencies</text><text font-family="Virgil, Segoe UI Emoji" font-size="28" fill="#5f3dc4" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(81.205 31.046)">Promise</text><path d="M42 10h263.38M42 10h263.38m0 0c21.34 0 32 10.67 32 32m-32-32c21.34 0 32 10.67 32 32m0 0v212.05m0-212.05v212.05m0 0c0 21.33-10.66 32-32 32m32-32c0 21.33-10.66 32-32 32m0 0H42m263.38 0H42m0 0c-21.33 0-32-10.67-32-32m32 32c-21.33 0-32-10.67-32-32m0 0V42m0 212.05V42m0 0c0-21.33 10.67-32 32-32M10 42c0-21.33 10.67-32 32-32" stroke="#343a40" stroke-width="2" fill="none" stroke-linecap="round"></path><g stroke-opacity="0.3" fill-opacity="0.3" stroke-linecap="round"><path d="M181.457 104.324h110.73l6.84.98 4.89 2.93 1.71 2.2 1.96 5.87.24 34.96-.98 6.84-1.22 2.69-3.91 3.91-2.69 1.22-6.84.98h-110.73l-6.85-.98-2.69-1.22-3.91-3.91-1.96-5.87v-38.62l1.96-5.87 3.91-3.91 2.69-1.22 6.85-.98" stroke-width="0" fill="#15aabf"></path><path d="M181.457 104.324h110.73m-110.73 0h110.73m0 0c10.43 0 15.64 5.22 15.64 15.65m-15.64-15.65c10.43 0 15.64 5.22 15.64 15.65m0 0v31.29m0-31.29v31.29m0 0c0 10.43-5.21 15.64-15.64 15.64m15.64-15.64c0 10.43-5.21 15.64-15.64 15.64m0 0h-110.73m110.73 0h-110.73m0 0c-10.43 0-15.65-5.21-15.65-15.64m15.65 15.64c-10.43 0-15.65-5.21-15.65-15.64m0 0v-31.29m0 31.29v-31.29m0 0c0-10.43 5.22-15.65 15.65-15.65m-15.65 15.65c0-10.43 5.22-15.65 15.65-15.65" stroke="#343a40" fill="none"></path></g><g stroke-opacity="0.3" fill-opacity="0.3"><text x="51.69" font-family="Virgil, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(182.151 110.839)">Imperative</text><text x="51.69" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(182.151 110.839)">Pipeline</text></g><g stroke-opacity="0.3" fill-opacity="0.3" stroke-linecap="round"><path d="m374.744 275.243.427-76.18 1.494-6.502 2.494-5.502 3.496-4.504 4.497-3.504 5.497-2.505 6.499-1.506 7.5-.508 78.39.425 6.501 1.494 5.503 2.495 4.503 3.495 3.504 4.497 2.506 5.498 1.506 6.498.507 7.5-.427 76.18-1.494 6.502-2.495 5.502-3.495 4.503-4.497 3.505-5.498 2.505-6.498 1.506-7.5.507-78.39-.425-6.501-1.493-5.503-2.495-4.503-3.496-3.505-4.496-2.505-5.498-1.506-6.499-.507-7.5" stroke-width="0" fill="#ced4da"></path><path d="m374.744 275.243-.066-68.68m.066 68.68-.066-68.68m0 0c-.02-21.34 10.64-32.01 31.97-32.03m-31.97 32.03c-.02-21.34 10.64-32.01 31.97-32.03m0 0 70.89-.069m-70.89.068 70.89-.068m0 0c21.33-.02 32.01 10.63 32.03 31.97m-32.03-31.97c21.33-.02 32.01 10.63 32.03 31.97m0 0 .066 68.68m-.066-68.68.066 68.68m0 0c.02 21.33-10.64 32.01-31.97 32.03m31.97-32.03c.02 21.33-10.64 32.01-31.97 32.03m0 0-70.89.068m70.89-.068-70.89.068m0 0c-21.33.02-32.01-10.64-32.03-31.97m32.03 31.97c-21.33.02-32.01-10.64-32.03-31.97" stroke="transparent" fill="none"></path></g><g stroke-opacity="0.3" fill-opacity="0.3" stroke-linecap="round"><path d="M441.797 157.39c2.94-.004 5.91.064 8.83.21 2.91.138 5.83.355 8.671.642 2.84.288 5.66.655 8.381 1.082 2.71.428 5.381.925 7.932 1.483 2.54.557 5.02 1.185 7.351 1.873a89.275 89.275 0 0 1 6.652 2.213 64.955 64.955 0 0 1 5.833 2.535 46.7 46.7 0 0 1 4.913 2.795c1.48.979 2.792 1.987 3.922 3.026 1.121 1.04 2.083 2.108 2.844 3.198.76 1.079 1.342 2.188 1.723 3.308.39 1.11.582 2.24.583 3.36.001 1.13-.188 2.26-.577 3.37-.379 1.11-.958 2.23-1.717 3.312-.759 1.08-1.718 2.161-2.837 3.192a30.382 30.382 0 0 1-3.917 3.034 46.708 46.708 0 0 1-4.907 2.815 64.976 64.976 0 0 1-5.828 2.535 84.85 84.85 0 0 1-6.647 2.237c-2.33.682-4.81 1.314-7.349 1.877a129.79 129.79 0 0 1-7.928 1.507c-2.72.433-5.54.796-8.38 1.088-2.839.293-5.759.516-8.669.669-2.92.153-5.89.225-8.83.228a172.202 172.202 0 0 1-17.5-.863c-2.84-.287-5.65-.645-8.371-1.072-2.72-.427-5.391-.925-7.932-1.492a114.403 114.403 0 0 1-7.361-1.863 84.85 84.85 0 0 1-6.653-2.224 64.976 64.976 0 0 1-5.832-2.524 46.708 46.708 0 0 1-4.913-2.806c-1.47-.968-2.792-1.987-3.913-3.026a20.243 20.243 0 0 1-2.853-3.187c-.76-1.08-1.342-2.199-1.723-3.309a10.124 10.124 0 0 1-.583-3.37 10.11 10.11 0 0 1 .577-3.36c.379-1.12.958-2.23 1.717-3.311.769-1.091 1.718-2.162 2.847-3.203 1.119-1.041 2.438-2.052 3.907-3.034a46.7 46.7 0 0 1 4.907-2.804 64.955 64.955 0 0 1 5.828-2.546 89.275 89.275 0 0 1 6.647-2.226c2.34-.693 4.81-1.325 7.359-1.887 2.54-.563 5.209-1.065 7.928-1.498 2.72-.433 5.53-.805 8.37-1.098 2.839-.293 5.759-.516 8.678-.658 2.91-.153 7.35-.197 8.82-.229 1.47-.041-1.47-.038 0 0" stroke-width="0" fill="#868e96"></path><path d="M441.797 157.39c2.94-.004 5.91.064 8.83.21 2.91.138 5.83.355 8.671.642 2.84.288 5.66.655 8.381 1.082 2.71.428 5.381.925 7.932 1.483 2.54.557 5.02 1.185 7.351 1.873a89.275 89.275 0 0 1 6.652 2.213 64.955 64.955 0 0 1 5.833 2.535 46.7 46.7 0 0 1 4.913 2.795c1.48.979 2.792 1.987 3.922 3.026 1.121 1.04 2.083 2.108 2.844 3.198.76 1.079 1.342 2.188 1.723 3.308.39 1.11.582 2.24.583 3.36.001 1.13-.188 2.26-.577 3.37-.379 1.11-.958 2.23-1.717 3.312-.759 1.08-1.718 2.161-2.837 3.192a30.382 30.382 0 0 1-3.917 3.034 46.708 46.708 0 0 1-4.907 2.815 64.976 64.976 0 0 1-5.828 2.535 84.85 84.85 0 0 1-6.647 2.237c-2.33.682-4.81 1.314-7.349 1.877a129.79 129.79 0 0 1-7.928 1.507c-2.72.433-5.54.796-8.38 1.088-2.839.293-5.759.516-8.669.669-2.92.153-5.89.225-8.83.228a172.202 172.202 0 0 1-17.5-.863c-2.84-.287-5.65-.645-8.371-1.072-2.72-.427-5.391-.925-7.932-1.492a114.403 114.403 0 0 1-7.361-1.863 84.85 84.85 0 0 1-6.653-2.224 64.976 64.976 0 0 1-5.832-2.524 46.708 46.708 0 0 1-4.913-2.806c-1.47-.968-2.792-1.987-3.913-3.026a20.243 20.243 0 0 1-2.853-3.187c-.76-1.08-1.342-2.199-1.723-3.309a10.124 10.124 0 0 1-.583-3.37 10.11 10.11 0 0 1 .577-3.36c.379-1.12.958-2.23 1.717-3.311.769-1.091 1.718-2.162 2.847-3.203 1.119-1.041 2.438-2.052 3.907-3.034a46.7 46.7 0 0 1 4.907-2.804 64.955 64.955 0 0 1 5.828-2.546 89.275 89.275 0 0 1 6.647-2.226c2.34-.693 4.81-1.325 7.359-1.887 2.54-.563 5.209-1.065 7.928-1.498 2.72-.433 5.53-.805 8.37-1.098 2.839-.293 5.759-.516 8.678-.658 2.91-.153 7.35-.197 8.82-.229 1.47-.041-1.47-.038 0 0" stroke="#343a40" fill="none"></path></g><g stroke-opacity="0.3" fill-opacity="0.3"><text x="47.536" font-family="Virgil, Segoe UI Emoji" font-size="16.654" fill="#343a40" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(393.297 223.006)">Declarative</text><text x="47.536" y="20.817" font-family="Virgil, Segoe UI Emoji" font-size="16.654" fill="#343a40" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(393.297 223.006)">State</text><text x="47.536" y="41.635" font-family="Virgil, Segoe UI Emoji" font-size="16.654" fill="#343a40" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(393.297 223.006)">Store</text></g><g stroke-linecap="round"><path d="m88.39 137.786 76.42-.3m-76.42.3 76.42-.3M136.66 147.856c8.39-3.09 16.78-6.18 28.15-10.37m-28.15 10.37c6.22-2.29 12.45-4.58 28.15-10.37M136.58 127.336c8.41 3.03 16.83 6.06 28.23 10.15m-28.23-10.15c6.24 2.25 12.48 4.49 28.23 10.15" stroke="#2b8a3e" stroke-width="4" fill="none"></path></g><g stroke-linecap="round"><path d="M309.7 138.56c9.7.32 44.83-2.15 58.21 1.89 13.39 4.05 18.42 18.65 22.1 22.38m-80.31-24.27c9.7.32 44.83-2.15 58.21 1.89 13.39 4.05 18.42 18.65 22.1 22.38" stroke="#2b8a3e" stroke-width="4" fill="none"></path><path d="M377.28 153.6c4.05 2.94 8.1 5.87 12.73 9.23m-12.73-9.23c3.05 2.22 6.11 4.43 12.73 9.23" stroke="#2b8a3e" stroke-width="4" fill="none"></path><path d="M386.18 147.58c1.22 4.85 2.44 9.7 3.83 15.25m-3.83-15.25c.92 3.66 1.84 7.32 3.83 15.25" stroke="#2b8a3e" stroke-width="4" fill="none"></path></g><g stroke-linecap="round"><path d="m37.686 24.953 3.77-.07 1.428.443.497 1.401.66 35.344-.444 1.418-1.41.497-5.189-.373-.496-1.401-.66-35.344.443-1.419 1.401-.496" stroke-width="0" fill="#7950f2"></path><path d="m37.686 24.953 3.77-.07m-3.77.07 3.77-.07m0 0c1.26-.024 1.901.594 1.925 1.844m-1.925-1.844c1.26-.024 1.901.594 1.925 1.844m0 0 .66 35.344m-.66-35.344.66 35.344m0 0c.023 1.25-.595 1.891-1.855 1.915m1.855-1.915c.023 1.25-.595 1.891-1.855 1.915m0 0-3.769.07m3.77-.07-3.77.07m0 0c-1.25.024-1.891-.594-1.915-1.844m1.915 1.844c-1.25.024-1.891-.594-1.915-1.844m0 0-.66-35.344m.66 35.344-.66-35.344m0 0c-.023-1.25.595-1.891 1.844-1.915m-1.844 1.915c-.023-1.25.595-1.891 1.844-1.915" stroke="transparent" fill="none"></path></g><g stroke-linecap="round"><path d="m68.609 24.61 2.87 2.445.776 1.278-.556 1.379-29.701 34.877-1.272.769-1.386-.563-3.639-3.717.556-1.378 29.701-34.877 1.272-.769 1.379.557" stroke-width="0" fill="#7950f2"></path><path d="m68.609 24.61 2.87 2.445m-2.87-2.444 2.87 2.444m0 0c.96.817 1.03 1.705.22 2.657m-.22-2.657c.96.817 1.03 1.705.22 2.657m0 0L41.998 64.589m29.7-34.877-29.7 34.877m0 0c-.81.951-1.699 1.023-2.658.206m2.658-.206c-.81.951-1.699 1.023-2.658.206m0 0-2.87-2.445m2.87 2.445-2.87-2.445m0 0c-.952-.81-1.023-1.698-.213-2.65m.213 2.65c-.952-.81-1.023-1.698-.213-2.65m0 0 29.701-34.877M36.258 59.7l29.7-34.877m0 0c.81-.952 1.699-1.023 2.65-.212m-2.65.212c.81-.952 1.699-1.023 2.65-.212" stroke="transparent" fill="none"></path></g><g stroke-linecap="round"><path d="m73.289 62.102-2.855 2.462-1.382.572-1.277-.76L51.753 45.8l-.565-1.374.762-1.291 4.236-3.02 1.277.76 16.021 18.576.566 1.374-.761 1.277" stroke-width="0" fill="#7950f2"></path><path d="m73.289 62.102-2.855 2.462m2.855-2.462-2.855 2.462m0 0c-.954.823-1.843.758-2.66-.189m2.66.19c-.954.822-1.843.757-2.66-.19m0 0L51.755 45.8m16.02 18.575L51.755 45.8m0 0c-.824-.954-.758-1.842.196-2.665m-.197 2.665c-.823-.954-.757-1.842.197-2.665m0 0 2.855-2.463m-2.855 2.463 2.855-2.463m0 0c.946-.816 1.835-.75 2.658.204m-2.658-.204c.946-.816 1.835-.75 2.658.204m0 0L73.484 59.45M57.463 40.876 73.484 59.45m0 0c.817.946.751 1.835-.195 2.651m.195-2.651c.817.946.751 1.835-.195 2.651" stroke="transparent" fill="none"></path></g><g stroke-linecap="round"><path d="M43.712 27.393c.008.26-.003.53-.034.791a5.093 5.093 0 0 1-.165.776 4.223 4.223 0 0 1-.286.73 4.594 4.594 0 0 1-.399.673 4.6 4.6 0 0 1-.501.577c-.185.176-.38.333-.585.48a4.517 4.517 0 0 1-.649.35 4.444 4.444 0 0 1-.703.234 3.611 3.611 0 0 1-.727.093c-.25.009-.49-.004-.732-.046a4.444 4.444 0 0 1-1.397-.494 5.303 5.303 0 0 1-.614-.44 5.557 5.557 0 0 1-.538-.543 7.393 7.393 0 0 1-.442-.646 5.203 5.203 0 0 1-.333-.71 6.657 6.657 0 0 1-.215-.763 5.253 5.253 0 0 1-.051-1.58c.041-.26.093-.523.164-.775.082-.253.174-.506.286-.74.123-.224.256-.458.399-.663.153-.205.327-.401.501-.577.185-.176.38-.342.585-.48a4.444 4.444 0 0 1 1.362-.585c.238-.057.477-.085.727-.093.24-.008.49.004.732.046.241.043.484.105.716.187.223.083.457.185.67.309.215.123.42.276.616.44a4.6 4.6 0 0 1 .537.542 4.5 4.5 0 0 1 .775 1.356c.088.247.167.505.215.763.049.259.072.658.086.788.014.13.006-.13 0 0" stroke-width="0" fill="#7950f2"></path><path d="M43.712 27.393c.008.26-.003.53-.034.791a5.093 5.093 0 0 1-.165.776 4.223 4.223 0 0 1-.286.73 4.594 4.594 0 0 1-.399.673 4.6 4.6 0 0 1-.501.577c-.185.176-.38.333-.585.48a4.517 4.517 0 0 1-.649.35 4.444 4.444 0 0 1-.703.234 3.611 3.611 0 0 1-.727.093c-.25.009-.49-.004-.732-.046a4.444 4.444 0 0 1-1.397-.494 5.303 5.303 0 0 1-.614-.44 5.557 5.557 0 0 1-.538-.543 7.393 7.393 0 0 1-.442-.646 5.203 5.203 0 0 1-.333-.71 6.657 6.657 0 0 1-.215-.763 5.253 5.253 0 0 1-.051-1.58c.041-.26.093-.523.164-.775.082-.253.174-.506.286-.74.123-.224.256-.458.399-.663.153-.205.327-.401.501-.577.185-.176.38-.342.585-.48a4.444 4.444 0 0 1 1.362-.585c.238-.057.477-.085.727-.093.24-.008.49.004.732.046.241.043.484.105.716.187.223.083.457.185.67.309.215.123.42.276.616.44a4.6 4.6 0 0 1 .537.542 4.5 4.5 0 0 1 .775 1.356c.088.247.167.505.215.763.049.259.072.658.086.788.014.13.006-.13 0 0" stroke="#5f3dc4" fill="none"></path></g><g stroke-linecap="round"><path d="M44.672 59.64c.009.26-.002.531-.034.792a5.093 5.093 0 0 1-.164.776 4.223 4.223 0 0 1-.287.73 4.594 4.594 0 0 1-.398.673 4.6 4.6 0 0 1-.502.577c-.184.176-.379.333-.584.48a4.517 4.517 0 0 1-.65.35 4.444 4.444 0 0 1-.702.234 3.611 3.611 0 0 1-.727.093c-.25.009-.49-.004-.732-.046a4.444 4.444 0 0 1-1.397-.494 5.303 5.303 0 0 1-.615-.44 5.557 5.557 0 0 1-.538-.543 7.393 7.393 0 0 1-.441-.646 5.203 5.203 0 0 1-.333-.71 6.657 6.657 0 0 1-.215-.763 5.253 5.253 0 0 1-.052-1.58c.042-.26.093-.523.165-.775.082-.253.174-.506.286-.74.123-.224.255-.458.399-.663.153-.205.327-.401.501-.577.184-.176.38-.342.585-.48a4.444 4.444 0 0 1 1.362-.585c.238-.057.477-.084.727-.093.24-.007.49.004.732.047.241.042.483.104.716.186.223.083.456.185.67.309a4.6 4.6 0 0 1 1.153.983 4.5 4.5 0 0 1 .775 1.355c.088.247.166.505.215.763.048.259.071.658.085.788.015.13.006-.13 0 0" stroke-width="0" fill="#7950f2"></path><path d="M44.672 59.64c.009.26-.002.531-.034.792a5.093 5.093 0 0 1-.164.776 4.223 4.223 0 0 1-.287.73 4.594 4.594 0 0 1-.398.673 4.6 4.6 0 0 1-.502.577c-.184.176-.379.333-.584.48a4.517 4.517 0 0 1-.65.35 4.444 4.444 0 0 1-.702.234 3.611 3.611 0 0 1-.727.093c-.25.009-.49-.004-.732-.046a4.444 4.444 0 0 1-1.397-.494 5.303 5.303 0 0 1-.615-.44 5.557 5.557 0 0 1-.538-.543 7.393 7.393 0 0 1-.441-.646 5.203 5.203 0 0 1-.333-.71 6.657 6.657 0 0 1-.215-.763 5.253 5.253 0 0 1-.052-1.58c.042-.26.093-.523.165-.775.082-.253.174-.506.286-.74.123-.224.255-.458.399-.663.153-.205.327-.401.501-.577.184-.176.38-.342.585-.48a4.444 4.444 0 0 1 1.362-.585c.238-.057.477-.084.727-.093.24-.007.49.004.732.047.241.042.483.104.716.186.223.083.456.185.67.309a4.6 4.6 0 0 1 1.153.983 4.5 4.5 0 0 1 .775 1.355c.088.247.166.505.215.763.048.259.071.658.085.788.015.13.006-.13 0 0" stroke="#5f3dc4" fill="none"></path></g><g stroke-linecap="round"><path d="M59.14 45.544c.008.26-.003.53-.034.792a5.093 5.093 0 0 1-.165.776 3.555 3.555 0 0 1-.286.73 5.59 5.59 0 0 1-.389.672 4.6 4.6 0 0 1-.501.577c-.175.176-.37.332-.575.479a4.067 4.067 0 0 1-.649.351 4.653 4.653 0 0 1-.693.233 3.611 3.611 0 0 1-.727.094c-.24.008-.48-.005-.722-.047a3.97 3.97 0 0 1-1.377-.495 5.303 5.303 0 0 1-.614-.44 4.52 4.52 0 0 1-.97-1.19 4.223 4.223 0 0 1-.333-.709 6.657 6.657 0 0 1-.215-.763 5.253 5.253 0 0 1-.051-1.58c.041-.26.093-.523.164-.775a4.5 4.5 0 0 1 .685-1.403c.143-.205.317-.4.491-.577.185-.176.38-.342.585-.479a3.97 3.97 0 0 1 1.342-.584c.238-.058.477-.086.717-.093.24-.008.49.004.732.046.231.042.474.104.706.187a3.741 3.741 0 0 1 1.275.749 4.6 4.6 0 0 1 .539.542c.156.195.303.42.43.637.138.225.246.472.334.72.088.246.167.504.215.763.049.258.072.658.086.787.014.13.006-.13 0 0" stroke-width="0" fill="#7950f2"></path><path d="M59.14 45.544c.008.26-.003.53-.034.792a5.093 5.093 0 0 1-.165.776 3.555 3.555 0 0 1-.286.73 5.59 5.59 0 0 1-.389.672 4.6 4.6 0 0 1-.501.577c-.175.176-.37.332-.575.479a4.067 4.067 0 0 1-.649.351 4.653 4.653 0 0 1-.693.233 3.611 3.611 0 0 1-.727.094c-.24.008-.48-.005-.722-.047a3.97 3.97 0 0 1-1.377-.495 5.303 5.303 0 0 1-.614-.44 4.52 4.52 0 0 1-.97-1.19 4.223 4.223 0 0 1-.333-.709 6.657 6.657 0 0 1-.215-.763 5.253 5.253 0 0 1-.051-1.58c.041-.26.093-.523.164-.775a4.5 4.5 0 0 1 .685-1.403c.143-.205.317-.4.491-.577.185-.176.38-.342.585-.479a3.97 3.97 0 0 1 1.342-.584c.238-.058.477-.086.717-.093.24-.008.49.004.732.046.231.042.474.104.706.187a3.741 3.741 0 0 1 1.275.749 4.6 4.6 0 0 1 .539.542c.156.195.303.42.43.637.138.225.246.472.334.72.088.246.167.504.215.763.049.258.072.658.086.787.014.13.006-.13 0 0" stroke="#5f3dc4" fill="none"></path></g><g stroke-linecap="round"><path d="M72.356 28.194c.008.26-.003.53-.034.792a5.093 5.093 0 0 1-.165.775 4.223 4.223 0 0 1-.287.73 4.594 4.594 0 0 1-.398.674 4.6 4.6 0 0 1-.501.576c-.185.176-.38.333-.585.48a4.517 4.517 0 0 1-.649.35 4.444 4.444 0 0 1-.703.234 3.611 3.611 0 0 1-.727.094c-.25.008-.49-.004-.732-.046a4.444 4.444 0 0 1-1.397-.495 5.303 5.303 0 0 1-.614-.44 5.557 5.557 0 0 1-.538-.543 7.393 7.393 0 0 1-.442-.646 5.203 5.203 0 0 1-.333-.71 6.657 6.657 0 0 1-.215-.763 5.253 5.253 0 0 1-.052-1.58c.042-.26.093-.522.165-.775.082-.253.174-.506.286-.74.123-.224.255-.458.399-.663.153-.205.327-.4.501-.577.185-.176.38-.342.585-.479a4.444 4.444 0 0 1 1.362-.585c.238-.057.477-.085.727-.093.24-.008.49.004.732.046.241.042.484.104.716.186.223.083.457.186.67.309a4.6 4.6 0 0 1 1.153.983 4.5 4.5 0 0 1 .775 1.355c.088.247.167.505.215.764.049.258.072.658.086.787.014.13.006-.13 0 0" stroke-width="0" fill="#7950f2"></path><path d="M72.356 28.194c.008.26-.003.53-.034.792a5.093 5.093 0 0 1-.165.775 4.223 4.223 0 0 1-.287.73 4.594 4.594 0 0 1-.398.674 4.6 4.6 0 0 1-.501.576c-.185.176-.38.333-.585.48a4.517 4.517 0 0 1-.649.35 4.444 4.444 0 0 1-.703.234 3.611 3.611 0 0 1-.727.094c-.25.008-.49-.004-.732-.046a4.444 4.444 0 0 1-1.397-.495 5.303 5.303 0 0 1-.614-.44 5.557 5.557 0 0 1-.538-.543 7.393 7.393 0 0 1-.442-.646 5.203 5.203 0 0 1-.333-.71 6.657 6.657 0 0 1-.215-.763 5.253 5.253 0 0 1-.052-1.58c.042-.26.093-.522.165-.775.082-.253.174-.506.286-.74.123-.224.255-.458.399-.663.153-.205.327-.4.501-.577.185-.176.38-.342.585-.479a4.444 4.444 0 0 1 1.362-.585c.238-.057.477-.085.727-.093.24-.008.49.004.732.046.241.042.484.104.716.186.223.083.457.186.67.309a4.6 4.6 0 0 1 1.153.983 4.5 4.5 0 0 1 .775 1.355c.088.247.167.505.215.764.049.258.072.658.086.787.014.13.006-.13 0 0" stroke="#5f3dc4" fill="none"></path></g><g stroke-linecap="round"><path d="M74.407 61.208c.008.26-.003.53-.034.791a5.093 5.093 0 0 1-.165.776 4.223 4.223 0 0 1-.287.73 4.594 4.594 0 0 1-.398.673 4.6 4.6 0 0 1-.501.577c-.185.176-.38.332-.585.479a4.517 4.517 0 0 1-.649.351 4.444 4.444 0 0 1-.703.233 3.611 3.611 0 0 1-.727.094c-.25.008-.49-.004-.732-.046a4.444 4.444 0 0 1-1.397-.495 5.303 5.303 0 0 1-.614-.44 5.557 5.557 0 0 1-.538-.543 7.393 7.393 0 0 1-.442-.646 5.203 5.203 0 0 1-.333-.71 6.657 6.657 0 0 1-.215-.763 5.253 5.253 0 0 1-.052-1.579c.042-.261.093-.523.165-.776.082-.252.174-.505.286-.74.123-.223.255-.458.399-.663.153-.205.327-.4.501-.576.185-.176.38-.343.585-.48a4.444 4.444 0 0 1 1.362-.585c.238-.057.477-.085.727-.093.24-.008.49.004.732.046.241.042.484.104.716.187.223.083.457.185.67.308a4.6 4.6 0 0 1 1.153.983 4.5 4.5 0 0 1 .775 1.356c.088.247.167.504.215.763.049.258.072.658.086.788.014.13.006-.13 0 0" stroke-width="0" fill="#7950f2"></path><path d="M74.407 61.208c.008.26-.003.53-.034.791a5.093 5.093 0 0 1-.165.776 4.223 4.223 0 0 1-.287.73 4.594 4.594 0 0 1-.398.673 4.6 4.6 0 0 1-.501.577c-.185.176-.38.332-.585.479a4.517 4.517 0 0 1-.649.351 4.444 4.444 0 0 1-.703.233 3.611 3.611 0 0 1-.727.094c-.25.008-.49-.004-.732-.046a4.444 4.444 0 0 1-1.397-.495 5.303 5.303 0 0 1-.614-.44 5.557 5.557 0 0 1-.538-.543 7.393 7.393 0 0 1-.442-.646 5.203 5.203 0 0 1-.333-.71 6.657 6.657 0 0 1-.215-.763 5.253 5.253 0 0 1-.052-1.579c.042-.261.093-.523.165-.776.082-.252.174-.505.286-.74.123-.223.255-.458.399-.663.153-.205.327-.4.501-.576.185-.176.38-.343.585-.48a4.444 4.444 0 0 1 1.362-.585c.238-.057.477-.085.727-.093.24-.008.49.004.732.046.241.042.484.104.716.187.223.083.457.185.67.308a4.6 4.6 0 0 1 1.153.983 4.5 4.5 0 0 1 .775 1.356c.088.247.167.504.215.763.049.258.072.658.086.788.014.13.006-.13 0 0" stroke="#5f3dc4" fill="none"></path></g><path d="M43.325 27.85c.007.22-.005.45-.038.672-.023.221-.076.443-.149.655a3.329 3.329 0 0 1-.25.619 3.525 3.525 0 0 1-.352.562c-.134.184-.288.35-.444.494-.165.146-.34.292-.527.408a3.1 3.1 0 0 1-.57.299 3.573 3.573 0 0 1-1.923.243 3.727 3.727 0 0 1-.636-.16 3.524 3.524 0 0 1-.599-.26 4.802 4.802 0 0 1-.542-.373 3.505 3.505 0 0 1-.475-.465 4.224 4.224 0 0 1-.687-1.138 3.63 3.63 0 0 1-.182-.644 3.793 3.793 0 0 1-.044-1.34c.023-.22.076-.442.139-.665a4.07 4.07 0 0 1 .612-1.18c.134-.175.289-.34.444-.495.165-.145.34-.281.517-.397.186-.116.383-.223.58-.31.208-.076.416-.143.624-.19a3.493 3.493 0 0 1 1.3-.042c.21.033.423.086.635.15.202.073.405.166.589.27.193.104.378.228.552.362.165.145.33.3.475.465.146.166.272.352.388.538.117.196.213.393.29.6.087.218.154.436.191.655.047.218.069.558.082.668.014.11.007-.11 0 0M44.098 60.063c.008.22-.005.45-.038.672-.022.22-.075.442-.148.655a3.329 3.329 0 0 1-.25.618 3.525 3.525 0 0 1-.352.562c-.134.185-.289.35-.444.495-.166.145-.341.291-.527.407a3.1 3.1 0 0 1-.57.3 3.573 3.573 0 0 1-1.923.243 3.727 3.727 0 0 1-.636-.16 3.524 3.524 0 0 1-.6-.261 4.802 4.802 0 0 1-.542-.373 3.505 3.505 0 0 1-.475-.464 4.224 4.224 0 0 1-.687-1.138 3.63 3.63 0 0 1-.182-.645 3.793 3.793 0 0 1-.043-1.34c.022-.22.075-.442.138-.664a4.07 4.07 0 0 1 .612-1.18c.134-.175.289-.34.444-.495.165-.146.34-.282.517-.397.187-.117.383-.223.58-.31.208-.076.416-.143.625-.19a3.493 3.493 0 0 1 1.299-.042c.211.033.423.086.635.149.203.073.406.167.59.27.193.105.377.229.551.363.165.145.33.3.476.465.145.165.271.351.387.537.117.197.213.394.29.601.087.218.155.436.192.654.047.219.068.559.081.668.014.11.007-.11 0 0M58.654 45.23c.007.22-.006.441-.039.662a2.8 2.8 0 0 1-.149.635 3.238 3.238 0 0 1-.25.609 3.969 3.969 0 0 1-.352.552c-.135.164-.29.33-.445.474a4.698 4.698 0 0 1-.518.398 4.535 4.535 0 0 1-.58.299 4.502 4.502 0 0 1-.624.19 3.493 3.493 0 0 1-1.29.042 4.502 4.502 0 0 1-.635-.15 4.535 4.535 0 0 1-.599-.26 4.698 4.698 0 0 1-.542-.362 4.993 4.993 0 0 1-.474-.445 3.969 3.969 0 0 1-.687-1.118 3.423 3.423 0 0 1-.18-.625 3.683 3.683 0 0 1-.082-.657c-.007-.22.005-.44.039-.652.022-.22.075-.433.139-.645.073-.202.156-.405.26-.599.104-.193.218-.387.352-.552.135-.174.29-.34.445-.484.165-.146.34-.282.517-.387.187-.117.383-.223.581-.3a3.45 3.45 0 0 1 .624-.19 3.466 3.466 0 0 1 1.29-.042c.21.033.432.076.635.15.202.063.405.156.598.26.184.094.368.218.542.353.165.134.33.289.475.454.146.156.272.342.388.528.116.186.212.383.289.58.087.208.153.416.19.635.047.208.068.538.082.648.013.11.006-.11 0 0M71.406 28.328c.007.22-.006.44-.028.661-.024.211-.066.433-.13.635a5.358 5.358 0 0 1-.22.607 3.773 3.773 0 0 1-1.175 1.42 3.845 3.845 0 0 1-.52.296 3.618 3.618 0 0 1-.554.189 2.76 2.76 0 0 1-1.15.037 3.618 3.618 0 0 1-.565-.152 3.845 3.845 0 0 1-.539-.262 4.116 4.116 0 0 1-.482-.365 3.552 3.552 0 0 1-.772-.975 3.986 3.986 0 0 1-.27-.591 3.399 3.399 0 0 1-.17-.625 4.887 4.887 0 0 1-.072-.658c-.007-.22.006-.44.03-.652.022-.22.065-.432.128-.644.064-.202.137-.405.23-.598.085-.193.188-.386.313-.55.115-.174.25-.339.395-.484.145-.144.3-.28.457-.385.167-.115.343-.221.52-.297a2.78 2.78 0 0 1 .555-.188 2.784 2.784 0 0 1 1.15-.037c.19.033.382.077.565.151.182.064.365.158.539.263.163.094.337.219.481.354.155.135.3.29.425.457.136.155.252.342.358.528.096.187.183.384.259.582.077.208.134.416.17.635.038.209.058.538.072.648.014.11.006-.11 0 0M73.162 61.15c.007.22.004.44-.019.662-.023.21-.066.432-.11.634a5.309 5.309 0 0 1-.2.606 6.855 6.855 0 0 1-.272.55c-.104.163-.23.327-.354.471a3.005 3.005 0 0 1-.858.689c-.158.075-.326.14-.495.186a2.22 2.22 0 0 1-1.02.033 2.842 2.842 0 0 1-.494-.154 3.235 3.235 0 0 1-.48-.264 3.005 3.005 0 0 1-.431-.366 4.056 4.056 0 0 1-.375-.448 4.682 4.682 0 0 1-.318-.53 5.29 5.29 0 0 1-.23-.593 4.42 4.42 0 0 1-.16-.625c-.027-.22-.054-.439-.061-.659-.007-.22.006-.44.019-.65.022-.221.066-.433.119-.645.053-.202.117-.404.19-.596.084-.193.178-.386.283-.55a3.43 3.43 0 0 1 .344-.481c.125-.144.261-.279.408-.384.146-.115.303-.22.46-.295.158-.085.316-.14.485-.186a2.22 2.22 0 0 1 1.02-.033c.17.034.342.079.504.154.163.064.326.159.47.264.152.095.297.22.431.356.135.136.27.292.385.458.105.157.212.343.308.53.086.188.172.385.239.583.057.208.113.416.15.635.037.21.058.539.062.649.013.11.006-.11 0 0" stroke="#fff" fill="none" stroke-linecap="round"></path><g stroke-opacity="0.3" fill-opacity="0.3" stroke-linecap="round"><path d="m44.152 101.58 29.65.21 4.98 1.66 3.31 3.31 1.87 8.09v40.72l-.83 5.8-1.04 2.28-3.31 3.32-8.09 1.87-29.65-.21-4.98-1.66-3.31-3.32-1.87-8.08.21-43.83 1.66-4.98 3.31-3.31 8.09-1.87" stroke-width="0" fill="#fab005"></path><path d="M44.152 101.58h26.54m-26.54 0h26.54m0 0c8.85 0 13.27 4.42 13.27 13.27m-13.27-13.27c8.85 0 13.27 4.42 13.27 13.27m0 0v40.72m0-40.72v40.72m0 0c0 8.84-4.42 13.27-13.27 13.27m13.27-13.27c0 8.84-4.42 13.27-13.27 13.27m0 0h-26.54m26.54 0h-26.54m0 0c-8.85 0-13.27-4.43-13.27-13.27m13.27 13.27c-8.85 0-13.27-4.43-13.27-13.27m0 0v-40.72m0 40.72v-40.72m0 0c0-8.85 4.42-13.27 13.27-13.27m-13.27 13.27c0-8.85 4.42-13.27 13.27-13.27" stroke="#000" fill="none"></path></g><text x="18.62" font-family="Virgil, Segoe UI Emoji" font-size="20" text-anchor="middle" style="white-space:pre" dominant-baseline="text-before-edge" transform="translate(38.418 122.566)" stroke-opacity="0.3" fill-opacity="0.3">API</text></svg><figcaption>Promise dependencies provide a way to install and configure shared resources that enables the platform to provide self-service Resources.</figcaption></figure><h2 class="anchor anchorWithStickyNavbar_LWe7" id="splitting-dependencies">Splitting out Elastic Cloud Kubernetes (ECK) dependencies<a href="#splitting-dependencies" class="hash-link" aria-label="Direct link to Splitting out Elastic Cloud Kubernetes (ECK) dependencies" title="Direct link to Splitting out Elastic Cloud Kubernetes (ECK) dependencies">​</a></h2><p>The Pipeline <code>run</code> script currently follows the installation instructions in the ECK
documentation <a href="https://www.elastic.co/guide/en/cloud-on-k8s/2.8/k8s-deploy-eck.html" target="_blank" rel="noopener noreferrer">here</a>.
Namely, the two separate files downloaded, the CRDs and the operator. Then creating
the required Resources from the CRDs.</p><p>The operator and its CRDs are a set of resources that only need and can be
installed once in a cluster. After they are installed they can serve as many
Resources as needed. Therefore, if you want to support provisioning multiple
Resources you will need to change how the CRDs and operator resources are installed
into the cluster so that there is not a conflict.</p><img loading="lazy" src="/img/docs/workshop/operator-as-shared-dependency.png" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dependencies">Dependencies<a href="#dependencies" class="hash-link" aria-label="Direct link to Dependencies" title="Direct link to Dependencies">​</a></h3><p>Currently, both the operator and the request for an Resource from the operator
are generated in the Workflow. Kratix has the concept of <code>dependencies</code> which
can be useful to manage different types of resources. While a Configure Workflow runs on
every request for a resource, the dependencies are a set of resources that only
need to be installed once per cluster for the given Promise.</p><p>A simple use cases may be to create a shared namespace that all subsequent
Resources get scheduled to. In the case of this ECK Promise, you can
install the Operator and CRDs as a dependencies.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="remove-shared-dependencies-from-the-pipeline">Remove shared dependencies from the Pipeline<a href="#remove-shared-dependencies-from-the-pipeline" class="hash-link" aria-label="Direct link to Remove shared dependencies from the Pipeline" title="Direct link to Remove shared dependencies from the Pipeline">​</a></h3><p>The following steps will refactor this Promise to instead separate shared dependencies from individual request resources:</p><img loading="lazy" src="/img/docs/workshop/promise-with-dependencies.png" class="img_ev3q"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="remove-one-off-files-ie-dependencies-from-pipeline">Remove one-off files (i.e. dependencies) from Pipeline<a href="#remove-one-off-files-ie-dependencies-from-pipeline" class="hash-link" aria-label="Direct link to Remove one-off files (i.e. dependencies) from Pipeline" title="Direct link to Remove one-off files (i.e. dependencies) from Pipeline">​</a></h4><p>First you will need to remove the Operator and CRD files from the Pipeline <code>run</code> script in order in order to stop them from being created on each request for a Resource.</p><p>Open the <code>pipeline/run</code> file and remove lines 9-16. This will remove both curl commands which download the CRDs and controller resources.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary> 👉🏾 Prefer to copy the whole working pipeline/run file? 👈🏾 </summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">Complete pipeline/run</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/usr/bin/env bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">set</span><span class="token plain"> -eu -o pipefail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p to-deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable" style="color:#36acaa">yq </span><span class="token string variable builtin class-name" style="color:#36acaa">eval</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&#x27;.metadata.name&#x27;</span><span class="token string variable" style="color:#36acaa"> /input/object.yaml</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">enableDataCollection</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable" style="color:#36acaa">yq </span><span class="token string variable builtin class-name" style="color:#36acaa">eval</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&#x27;.spec.enableDataCollection&#x27;</span><span class="token string variable" style="color:#36acaa"> /input/object.yaml</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Generate ECK requests...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Only set the beats value file if data collection is enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">valuesFile</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$enableDataCollection</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;s/NAME/</span><span class="token string variable" style="color:#36acaa">${name}</span><span class="token string" style="color:#e3116c">/g&quot;</span><span class="token plain"> beats-values.yaml </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> beats-final-values.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">valuesFile</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;--values beats-final-values.yaml&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">nodePort</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable builtin class-name" style="color:#36acaa">echo</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&quot;</span><span class="token string variable string variable" style="color:#36acaa">${name}</span><span class="token string variable string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable" style="color:#36acaa"> md5sum </span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable function" style="color:#d73a49">grep</span><span class="token string variable" style="color:#36acaa"> -Eo </span><span class="token string variable string" style="color:#e3116c">&quot;[[:digit:]]{3}&quot;</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable function" style="color:#d73a49">head</span><span class="token string variable" style="color:#36acaa"> -n1</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">nodePort</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$((</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable number" style="color:#36acaa">30000</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">+</span><span class="token variable" style="color:#36acaa"> nodePort </span><span class="token variable" style="color:#36acaa">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;s/NODEPORT/</span><span class="token string variable" style="color:#36acaa">${nodePort}</span><span class="token string" style="color:#e3116c">/g&quot;</span><span class="token plain"> default-config.yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;s/NAME/</span><span class="token string variable" style="color:#36acaa">${name}</span><span class="token string" style="color:#e3116c">/g&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> default-config-final-values.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm template </span><span class="token variable" style="color:#36acaa">$name</span><span class="token plain"> eck-stack </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token variable" style="color:#36acaa">$valuesFile</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --values default-config-final-values.yaml </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --repo https://helm.elastic.co </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --output-dir to-deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Adding namespaces to all helm output files...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /pipeline/to-deploy/eck-stack -name </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">*.yaml   -exec yq -i </span><span class="token string" style="color:#e3116c">&#x27;select(.metadata | has(&quot;namespace&quot;) | not).metadata.namespace |= &quot;default&quot;&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Removing enterprise annotation...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /pipeline/to-deploy/eck-stack -name </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">*.yaml   -exec yq -i </span><span class="token string" style="color:#e3116c">&#x27;del(.metadata.annotations[&quot;eck.k8s.elastic.co/license&quot;])&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Copying files to /output...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /pipeline/to-deploy -name </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">*.yaml -exec </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> /output </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Done&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h4 class="anchor anchorWithStickyNavbar_LWe7" id="run-the-test-suite-see-it-passing">Run the test suite, see it passing<a href="#run-the-test-suite-see-it-passing" class="hash-link" aria-label="Direct link to Run the test suite, see it passing" title="Direct link to Run the test suite, see it passing">​</a></h4><p>With the downloads removed, you can re-run the test suite and see that the resulting files no long include the Operator or the CRDs.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scripts/test-pipeline</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the execution completes, use the following command to check the files generated by the Pipeline:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tree </span><span class="token builtin class-name">test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Verify that the output shows only the following files:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">📂 test</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">├── input</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">│   └── object.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">├── metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">└── output</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">    ├── beats.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">    ├── elasticsearch.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">    └── kibana.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-shared-dependencies-to-the-promise">Add shared dependencies to the Promise<a href="#add-shared-dependencies-to-the-promise" class="hash-link" aria-label="Direct link to Add shared dependencies to the Promise" title="Direct link to Add shared dependencies to the Promise">​</a></h3><p>Removing the files from the Pipeline is not enough. You must now also add them to the Promise as dependencies.</p><p>Run the following command to create a <code>dependencies</code> directory where you can store these files and any others that you may want to depend on for the Promise installation:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> --silent --location --output dependencies/elastic-crds.yaml https://download.elastic.co/downloads/eck/2.8.0/crds.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> --silent --location --output dependencies/elastic-operator.yaml https://download.elastic.co/downloads/eck/2.8.0/operator.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once stored locally, you will need to add these dependencies to the Promise file. The dependencies are added as a list under <code>dependencies</code> which can tricky with formatting and require some subtle white space changes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="download-the-workerresourcesbuilder">Download the WorkerResourcesBuilder<a href="#download-the-workerresourcesbuilder" class="hash-link" aria-label="Direct link to Download the WorkerResourcesBuilder" title="Direct link to Download the WorkerResourcesBuilder">​</a></h4><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>If you are using Instruqt, you can use the binary provided rather than downloading. When prompted, instead of downloading use the following command to move the binary into the right location:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> /root/bin/worker-resource-builder ./bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>To make this step simpler there is a <em>very basic</em> tool which grabs all YAML documents from a single directory and injects them correctly into the <code>dependencies</code> field in the <code>promise.yaml</code>.</p><p>To use this tool, you will need to download the correct binary for your computer from <a href="https://github.com/syntasso/kratix/releases/tag/v0.0.4" target="_blank" rel="noopener noreferrer">GitHub releases</a>:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Intel Mac</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Apple Silicon Mac</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Linux ARM64</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Linux AMD64</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -sLo ./bin/worker-resource-builder.tar.gz https://github.com/syntasso/kratix/releases/download/v0.0.4/worker-resource-builder_0.0.4_darwin_amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -xvf ./bin/worker-resource-builder.tar.gz -C ./bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv ./bin/worker-resource-builder-v* ./bin/worker-resource-builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x ./bin/worker-resource-builder</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -sLo ./bin/worker-resource-builder.tar.gz https://github.com/syntasso/kratix/releases/download/v0.0.4/worker-resource-builder_0.0.4_darwin_arm64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -xvf ./bin/worker-resource-builder.tar.gz -C ./bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv ./bin/worker-resource-builder-v* ./bin/worker-resource-builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x ./bin/worker-resource-builder</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -sLo ./bin/worker-resource-builder.tar.gz https://github.com/syntasso/kratix/releases/download/v0.0.4/worker-resource-builder_0.0.4_linux_arm64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -xvf ./bin/worker-resource-builder.tar.gz -C ./bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv ./bin/worker-resource-builder-v* ./bin/worker-resource-builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x ./bin/worker-resource-builder</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -sLo ./bin/worker-resource-builder.tar.gz https://github.com/syntasso/kratix/releases/download/v0.0.4/worker-resource-builder_0.0.4_linux_amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -xvf ./bin/worker-resource-builder.tar.gz -C ./bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv ./bin/worker-resource-builder-v* ./bin/worker-resource-builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x ./bin/worker-resource-builder</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>Once installed, you can see how to use the binary by running the following help command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/worker-resource-builder --help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above command will give an output similar to:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">Usage of ./bin/worker-resource-builder:</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">  -resources-dir string</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">        Absolute Path of k8s resources to build dependencies from</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">  -promise string</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">        Absolute path of Promise to insert dependencies into</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-all-dependencies-to-the-promise">Add all dependencies to the Promise<a href="#add-all-dependencies-to-the-promise" class="hash-link" aria-label="Direct link to Add all dependencies to the Promise" title="Direct link to Add all dependencies to the Promise">​</a></h4><p>Per the usage instructions you have now seen, you can use the provided binary to add dependencies to an existing Promise. Run the following command to overwrite the current Promise file to add the dependencies to the existing API and Workflows sections:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;current Promise length is: </span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">wc</span><span class="token string variable" style="color:#36acaa"> -l promise.yaml</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./bin/worker-resource-builder -resources-dir ./dependencies -promise promise.yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> tmp-promise.yaml  </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/dev/null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> tmp-promise.yaml promise.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;new Promise length is: </span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">wc</span><span class="token string variable" style="color:#36acaa"> -l promise.yaml</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above command will give an output similar to:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">current Promise length is: 35 promise.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">new Promise length is: 11398 promise.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this output, you can see that the the files in the <code>dependencies</code> directory have now been added to the <code>promise.yaml</code> file. You can also check the top of the newly edited <code>promise.yaml</code> and see that these resources have been added as list items under the <code>dependencies</code> key.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>You may notice that the length of the files in <code>dependencies</code> is shorter than what was added to the <code>promise.yaml</code> file. This is because the <code>worker-resources-builder</code> binary reformatted long lines into more readable lines with a max length of 90.</p><p>If you have <a href="https://mikefarah.gitbook.io/yq/" target="_blank" rel="noopener noreferrer">yq</a> installed you can verify the total number of documents in both matches with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">yq ea </span><span class="token string" style="color:#e3116c">&#x27;[.] | length&#x27;</span><span class="token plain"> dependencies/*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">yq </span><span class="token string" style="color:#e3116c">&#x27;.spec.dependencies | length&#x27;</span><span class="token plain"> promise.yaml</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>No difference in number of YAML resources will result in no output.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-promise">Install the Promise<a href="#install-promise" class="hash-link" aria-label="Direct link to Install the Promise" title="Direct link to Install the Promise">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisite-setup">Prerequisite setup<a href="#prerequisite-setup" class="hash-link" aria-label="Direct link to Prerequisite setup" title="Direct link to Prerequisite setup">​</a></h3><p>Following the previous step of this tutorial, you should now
have a deployment of both Kratix and MinIO running on your Platform cluster
with no installed Promises.</p><p>You should also have two environment variables, <code>PLATFORM</code> and <code>WORKER</code>.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Verify the current state of your installation</summary><div><div class="collapsibleContent_i85q">Run:<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">$PLATFORM</span><span class="token plain"> get deployments --namespace kratix-platform-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above command will give an output similar to:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">NAME                                 READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">kratix-platform-controller-manager   1/1     1            1           1h</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">minio                                1/1     1            1           1h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should also have a State Store created and configured to point to the
<code>kratix</code> bucket on MinIO. Verify the <code>bucketstatestores</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">$PLATFORM</span><span class="token plain"> get bucketstatestores.platform.kratix.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above command will give an output similar to:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">NAME          AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">minio-store   1h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Verify there are no existing Promises:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">$PLATFORM</span><span class="token plain"> get promises</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Verify your cluster environment variables are set:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">env</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PLATFORM\|WORKER&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>which should result in:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">WORKER=kind-worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">PLATFORM=kind-platform</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><p>If you are are not continuing from the previous section, or your outputs do not align with the validation, please refer back to
<a href="/docs/workshop/installing-kratix">Installing Kratix</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-promise">Install the Promise<a href="#install-the-promise" class="hash-link" aria-label="Direct link to Install the Promise" title="Direct link to Install the Promise">​</a></h3><p>With the Pipeline image available, you can now install the updated Promise:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">${PLATFORM}</span><span class="token plain"> create --filename promise.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To validate the Promise has been installed, you can list all Promises by running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context kind-platform get promises</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your output will show the <code>elastic-cloud</code> Promise:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">NAME            AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">elastic-cloud   10s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In addition, you can now verify that the dependencies have been installed on the worker cluster:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">${WORKER}</span><span class="token plain"> get crds </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> elastic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">${WORKER}</span><span class="token plain"> get pods -n elastic-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above command will give an output similar to:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">agents.agent.k8s.elastic.co                            2023-02-01T12:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">apmservers.apm.k8s.elastic.co                          2023-02-01T12:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">beats.beat.k8s.elastic.co                              2023-02-01T12:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">elasticmapsservers.maps.k8s.elastic.co                 2023-02-01T12:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">elasticsearchautoscalers.autoscaling.k8s.elastic.co    2023-02-01T12:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">elasticsearches.elasticsearch.k8s.elastic.co           2023-02-01T12:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">enterprisesearches.enterprisesearch.k8s.elastic.co     2023-02-01T12:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">kibanas.kibana.k8s.elastic.co                          2023-02-01T12:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">logstashes.logstash.k8s.elastic.co                     2023-02-01T12:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">stackconfigpolicies.stackconfigpolicy.k8s.elastic.co   2023-02-01T12:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token output" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token output">NAME                 READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">elastic-operator-0   1/1     Running   0          1m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resource-requests">Make multiple requests<a href="#resource-requests" class="hash-link" aria-label="Direct link to Make multiple requests" title="Direct link to Make multiple requests">​</a></h2><p>Now that you have installed the operator and CRDs as a part of Promise installation,
you can once again don the Application Engineer hat and return to the original goal of
requesting more than one Resource from the single ECK Promise.</p><p>Just as you did in the last step, you will need to make two requests with
two different resource names:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">$PLATFORM</span><span class="token plain"> apply --filename resource-request.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> resource-request.yaml </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;s/name: example/name: second-request/&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubectl --context </span><span class="token variable" style="color:#36acaa">$PLATFORM</span><span class="token plain"> apply --filename -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With these two requests made, you can see both Workflows running simultaneously:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">$PLATFORM</span><span class="token plain"> get pods</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above command will give an output similar to:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">NAME                                           READY   STATUS      RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">configure-pipeline-elastic-cloud-default-01650   0/1     Completed   0          106s</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">configure-pipeline-elastic-cloud-default-99684   0/1     Completed   0          11s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And once completed you will be able to watch for two sets of ECK resources being deployed to the Worker cluster:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">$WORKER</span><span class="token plain"> get pods --watch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you see all 6 pods in the output similar to below, you can use <kbd>Ctrl</kbd>+<kbd>C</kbd> to exit the watch mode:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">NAME                                 READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">example-es-default-0                 1/1     Running   0          2m21s</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">example-kb-d97b489b-9twhq            1/1     Running   0          2m21s</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">example-beat-metricbeat-frpv7        1/1     Running   0          2m21s</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">second-request-es-default-0          1/1     Running   0          42s</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">second-request-kb-6cdc9594ff-7dnnm   1/1     Running   0          42s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>🤔 Want to see these Kibana&#x27;s in the browser? </summary><div><div class="collapsibleContent_i85q"><p>The first Kibana has been set up with a unique node port which has been configured to be exposed as a part of the workshop cluster setup.</p><p>You can visit http://localhost:30269 and check it out, and you can even login by using the default username <code>elastic</code> and retrieving the password from the worker cluster with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">$WORKER</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  get secret example-es-elastic-user </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --output go-template</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;{{.data.elastic | base64decode}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Any additional Kibana&#x27;s will be given a random other port so you will need to use the following port forward command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context kind-worker port-forward deploy/second-request-kb :5601</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command will then give you the following output:</p><div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token output">Forwarding from 127.0.0.1:51207 -&gt; 5601</span><br></span><span class="token-line" style="color:#393A34"><span class="token output">Forwarding from [::1]:51207 -&gt; 5601</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The local port will be randomly generated, but in this output you would use the port 51207.</p><p>This Kibana would need a different password which you can get from it&#x27;s secret with this command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">$WORKER</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  get secret second-request-es-elastic-user </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --output go-template</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;{{.data.elastic | base64decode}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>If you gave your ECK Resource a different name, you will nee to substitute the name in the above commands for the correct ones. For example, to port forward you would replace <code>NAME</code> with the name of your Resource:</p><p>kubectl --context $WORKER port-forward deploy/NAME-kb :5601</p></div></div></div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><p>And with that, you have reduced duplication by delivering shared dependencies separately from the on-demand service! While this workshop only showcases two Resources both deployed to the same cluster, this architecture can easily be used to support an unlimited number of Resources across an unlimited number of clusters.</p><p>To recap the steps you took:</p><ol><li>✅<!-- --> <!-- --> <!-- -->Evaluated what resources are shared dependencies</li><li>✅<!-- --> <!-- --> <!-- -->Moved any shared dependencies from Workflows to the dependencies</li><li>✅<!-- --> <!-- --> <!-- -->Viewed the dependency set up on Promise install</li><li>✅<!-- --> <!-- --> <!-- -->Successfully request more than one ECK Resources</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cleanup">Clean up environment<a href="#cleanup" class="hash-link" aria-label="Direct link to Clean up environment" title="Direct link to Clean up environment">​</a></h2><p>Before moving on, please remove the ECK Promise from your cluster.</p><p>To delete all the Promises:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl --context </span><span class="token variable" style="color:#36acaa">$PLATFORM</span><span class="token plain"> delete promises --all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="--congratulations">🎉 <!-- --> <!-- --> Congratulations!<a href="#--congratulations" class="hash-link" aria-label="Direct link to --congratulations" title="Direct link to --congratulations">​</a></h2><p>✅<!-- --> <!-- --> <!-- -->Your Promise can deliver on-demand services that have shared dependencies.<br>
👉🏾<!-- --> <!-- --> <!-- -->Next you will <a href="/docs/workshop/schedule-promise">Intentionally schedule Promise resources</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/syntasso/kratix-docs/tree/main/docs/workshop/part-ii/03-dependencies.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/workshop/service-on-demand"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Delivering your service on demand</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/workshop/schedule-promise"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Schedule Promises</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#understanding-dependencies" class="table-of-contents__link toc-highlight">Understanding Kratix Promise dependencies</a></li><li><a href="#splitting-dependencies" class="table-of-contents__link toc-highlight">Splitting out Elastic Cloud Kubernetes (ECK) dependencies</a><ul><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a></li><li><a href="#remove-shared-dependencies-from-the-pipeline" class="table-of-contents__link toc-highlight">Remove shared dependencies from the Pipeline</a></li><li><a href="#add-shared-dependencies-to-the-promise" class="table-of-contents__link toc-highlight">Add shared dependencies to the Promise</a></li></ul></li><li><a href="#install-promise" class="table-of-contents__link toc-highlight">Install the Promise</a><ul><li><a href="#prerequisite-setup" class="table-of-contents__link toc-highlight">Prerequisite setup</a></li><li><a href="#install-the-promise" class="table-of-contents__link toc-highlight">Install the Promise</a></li></ul></li><li><a href="#resource-requests" class="table-of-contents__link toc-highlight">Make multiple requests</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#cleanup" class="table-of-contents__link toc-highlight">Clean up environment</a></li><li><a href="#--congratulations" class="table-of-contents__link toc-highlight">🎉   Congratulations!</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/main/intro">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/kratixio" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/syntasso/kratix" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://syntasso.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Syntasso<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Syntasso Limited. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ed64e71f.js"></script>
<script src="/assets/js/main.d1626264.js"></script>
</body>
</html>