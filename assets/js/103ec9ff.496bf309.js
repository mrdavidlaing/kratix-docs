"use strict";(self.webpackChunkkratix_docs=self.webpackChunkkratix_docs||[]).push([[7339],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>k});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=c(r),d=a,k=p["".concat(s,".").concat(d)]||p[d]||m[d]||l;return r?n.createElement(k,i(i({ref:t},u),{},{components:r})):n.createElement(k,i({ref:t},u))}));function k(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,i=new Array(l);i[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:a,i[1]=o;for(var c=2;c<l;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},2585:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));const l={title:"Uninstalling Kratix",sidebar_label:"Uninstalling Kratix",description:"Learn more about how to uninstall Kratix"},i=void 0,o={unversionedId:"main/reference/deleting-kratix",id:"main/reference/deleting-kratix",title:"Uninstalling Kratix",description:"Learn more about how to uninstall Kratix",source:"@site/docs/main/05-reference/07-deleting-kratix.md",sourceDirName:"main/05-reference",slug:"/main/reference/deleting-kratix",permalink:"/docs/main/reference/deleting-kratix",draft:!1,editUrl:"https://github.com/syntasso/kratix-docs/tree/main/docs/main/05-reference/07-deleting-kratix.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"Uninstalling Kratix",sidebar_label:"Uninstalling Kratix",description:"Learn more about how to uninstall Kratix"},sidebar:"mainSidebar",previous:{title:"Multi-cluster management",permalink:"/docs/main/reference/multicluster-management"},next:{title:"Frequently Asked Questions",permalink:"/docs/main/faq"}},s={},c=[{value:"platform cluster",id:"platform-cluster",level:2},{value:"Worker Destination",id:"worker-destination",level:2},{value:"State Store",id:"state-store",level:2}],u={toc:c};function p(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"platform-cluster"},"platform cluster"),(0,a.kt)("p",null,"To uninstall Kratix you need to run through the following steps:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Delete all installed Promises:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl --context $PLATFORM delete promises --all -A\n")),"This will remove all of the Resource workloads from your ",(0,a.kt)("a",{parentName:"li",href:"/docs/main/reference/statestore/intro"},"State Store"),"."),(0,a.kt)("li",{parentName:"ol"},"Delete all other Kratix resources:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl --context $PLATFORM delete destinations --all -A\nkubectl --context $PLATFORM delete bucketstatestores --all -A\nkubectl --context $PLATFORM delete gitstatestores --all -A\n"))),(0,a.kt)("li",{parentName:"ol"},"Kratix can now be uninstalled:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl delete -f https://raw.githubusercontent.com/syntasso/kratix/main/distribution/kratix.yaml\n")))),(0,a.kt)("h2",{id:"worker-destination"},"Worker Destination"),(0,a.kt)("p",null,"In the previous steps Kratix will have deleted all the Resource workloads from the State Store,\nwhich will result in them being deleting from the worker Destination. The only changes\nthat need to be made on the worker is deleting Flux (if installed just for Kratix)\nand the Flux resources that sync down from the State Store."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Find the relevant ",(0,a.kt)("inlineCode",{parentName:"li"},"Kustomization")," resource:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl --context $WORKER get kustomizations -A\n"))),(0,a.kt)("li",{parentName:"ol"},"Delete the Kustomizations that are for Kratix.",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl --context $WORKER delete kustomization <name>\n"))),(0,a.kt)("li",{parentName:"ol"},"Find the relevant ",(0,a.kt)("inlineCode",{parentName:"li"},"Bucket")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"GitRepository")," resource:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl --context $WORKER get buckets,gitrepositories -A\n"))),(0,a.kt)("li",{parentName:"ol"},"Delete the ones that are for Kratix.",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl --context $WORKER delete bucket/gitrepositories <name>\n")))),(0,a.kt)("h2",{id:"state-store"},"State Store"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"/docs/main/reference/statestore/intro"},"State Store")," should now be empty, verify\nthis manually. In the event any files are left behind they can manually be deleted."))}p.isMDXComponent=!0}}]);